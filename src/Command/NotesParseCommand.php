<?php

namespace App\Command;

use App\Entity\Student;
use GuzzleHttp\Client;
use GuzzleHttp\Cookie\CookieJar;
use Symfony\Component\Console\Attribute\AsCommand;
use Symfony\Component\Console\Command\Command;
use Symfony\Component\Console\Input\InputArgument;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;
use Symfony\Component\Console\Style\SymfonyStyle;
use Symfony\Component\DomCrawler\Crawler;

#[AsCommand(
    name: 'notes:parse',
    description: 'Add a short description for your command',
)]
class NotesParseCommand extends Command
{
    public function __construct()
    {
        parent::__construct(null);
    }

    protected function configure(): void
    {
        $this
            ->addArgument('username', InputArgument::REQUIRED, 'Base username')
            ->addArgument('password', InputArgument::REQUIRED, 'Base password')
        ;
    }

    protected function execute(InputInterface $input, OutputInterface $output): int
    {
        $io = new SymfonyStyle($input, $output);
        $username = $input->getArgument('username');
        $password = $input->getArgument('password');


        $jar = new CookieJar();
        $client = new Client(['base_uri'=>'https://cas.univ-lehavre.fr','cookies'=>$jar]);
        $resp = $client->get('/cas/login');
        $crawler = new Crawler($resp->getBody()->getContents());
        $token = $crawler->filter('input[name="lt"]')->attr('value');
        $execution = $crawler->filter('input[name="execution"]')->attr('value');
        $resp = $client->request('POST','/cas//login',[
            'allow_redirects' => false,
            'body' => 'username='.$username.'&password='.$password.'&lt='.$token.'&execution='.$execution.'&_eventId=submit',
            'headers' => ['Content-type' => 'application/x-www-form-urlencoded'],
            'cookies' => $jar
        ]);
        if(count($jar->toArray()) < 3 )
        {
            $io->error('Could not retrieve data');
            return Command::FAILURE;
        }
        $client->request('GET', 'https://eureka.univ-lehavre.fr/login/index.php?authCAS=CAS', [
            'cookies' => $jar,
        ]);
        $html = <<<'HTML'
            <div class="ygtvchildren" id="ygtvc1"><div class="ygtvitem" id="ygtv2"><table id="ygtvtableel2" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel2" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20141227_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20141227_M1_2020-2021.html" title="20141227_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20141227_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc2" style="display:none;"></div></div><div class="ygtvitem" id="ygtv3"><table id="ygtvtableel3" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel3" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20142013_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20142013_M1_2020-2021.html" title="20142013_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20142013_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc3" style="display:none;"></div></div><div class="ygtvitem" id="ygtv4"><table id="ygtvtableel4" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel4" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20150611_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20150611_M1_2020-2021.html" title="20150611_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20150611_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc4" style="display:none;"></div></div><div class="ygtvitem" id="ygtv5"><table id="ygtvtableel5" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel5" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20151384_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20151384_M1_2020-2021.html" title="20151384_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20151384_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc5" style="display:none;"></div></div><div class="ygtvitem" id="ygtv6"><table id="ygtvtableel6" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel6" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20154084_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20154084_M1_2020-2021.html" title="20154084_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20154084_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc6" style="display:none;"></div></div><div class="ygtvitem" id="ygtv7"><table id="ygtvtableel7" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel7" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20160284_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20160284_M1_2020-2021.html" title="20160284_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20160284_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc7" style="display:none;"></div></div><div class="ygtvitem" id="ygtv8"><table id="ygtvtableel8" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel8" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20160352_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20160352_M1_2020-2021.html" title="20160352_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20160352_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc8" style="display:none;"></div></div><div class="ygtvitem" id="ygtv9"><table id="ygtvtableel9" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel9" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20161657_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20161657_M1_2020-2021.html" title="20161657_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20161657_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc9" style="display:none;"></div></div><div class="ygtvitem" id="ygtv10"><table id="ygtvtableel10" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel10" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20161725_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20161725_M1_2020-2021.html" title="20161725_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20161725_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc10" style="display:none;"></div></div><div class="ygtvitem" id="ygtv11"><table id="ygtvtableel11" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel11" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20162246_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20162246_M1_2020-2021.html" title="20162246_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20162246_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc11" style="display:none;"></div></div><div class="ygtvitem" id="ygtv12"><table id="ygtvtableel12" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel12" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20162396_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20162396_M1_2020-2021.html" title="20162396_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20162396_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc12" style="display:none;"></div></div><div class="ygtvitem" id="ygtv13"><table id="ygtvtableel13" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel13" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20163030_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20163030_M1_2020-2021.html" title="20163030_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20163030_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc13" style="display:none;"></div></div><div class="ygtvitem" id="ygtv14"><table id="ygtvtableel14" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel14" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20163419_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20163419_M1_2020-2021.html" title="20163419_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20163419_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc14" style="display:none;"></div></div><div class="ygtvitem" id="ygtv15"><table id="ygtvtableel15" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel15" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20163889_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20163889_M1_2020-2021.html" title="20163889_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20163889_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc15" style="display:none;"></div></div><div class="ygtvitem" id="ygtv16"><table id="ygtvtableel16" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel16" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20164465_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20164465_M1_2020-2021.html" title="20164465_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20164465_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc16" style="display:none;"></div></div><div class="ygtvitem" id="ygtv17"><table id="ygtvtableel17" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel17" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20170343_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20170343_M1_2020-2021.html" title="20170343_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20170343_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc17" style="display:none;"></div></div><div class="ygtvitem" id="ygtv18"><table id="ygtvtableel18" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel18" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20170357_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20170357_M1_2020-2021.html" title="20170357_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20170357_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc18" style="display:none;"></div></div><div class="ygtvitem" id="ygtv19"><table id="ygtvtableel19" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel19" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20170490_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20170490_M1_2020-2021.html" title="20170490_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20170490_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc19" style="display:none;"></div></div><div class="ygtvitem" id="ygtv20"><table id="ygtvtableel20" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel20" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20170577_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20170577_M1_2020-2021.html" title="20170577_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20170577_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc20" style="display:none;"></div></div><div class="ygtvitem" id="ygtv21"><table id="ygtvtableel21" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel21" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20170624_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20170624_M1_2020-2021.html" title="20170624_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20170624_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc21" style="display:none;"></div></div><div class="ygtvitem" id="ygtv22"><table id="ygtvtableel22" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel22" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20170630_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20170630_M1_2020-2021.html" title="20170630_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20170630_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc22" style="display:none;"></div></div><div class="ygtvitem" id="ygtv23"><table id="ygtvtableel23" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel23" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20170673_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20170673_M1_2020-2021.html" title="20170673_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20170673_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc23" style="display:none;"></div></div><div class="ygtvitem" id="ygtv24"><table id="ygtvtableel24" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel24" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20171529_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20171529_M1_2020-2021.html" title="20171529_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20171529_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc24" style="display:none;"></div></div><div class="ygtvitem" id="ygtv25"><table id="ygtvtableel25" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel25" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20171907_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20171907_M1_2020-2021.html" title="20171907_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20171907_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc25" style="display:none;"></div></div><div class="ygtvitem" id="ygtv26"><table id="ygtvtableel26" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel26" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20171976_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20171976_M1_2020-2021.html" title="20171976_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20171976_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc26" style="display:none;"></div></div><div class="ygtvitem" id="ygtv27"><table id="ygtvtableel27" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel27" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20172427_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20172427_M1_2020-2021.html" title="20172427_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20172427_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc27" style="display:none;"></div></div><div class="ygtvitem" id="ygtv28"><table id="ygtvtableel28" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel28" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20172478_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20172478_M1_2020-2021.html" title="20172478_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20172478_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc28" style="display:none;"></div></div><div class="ygtvitem" id="ygtv29"><table id="ygtvtableel29" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel29" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20172488_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20172488_M1_2020-2021.html" title="20172488_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20172488_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc29" style="display:none;"></div></div><div class="ygtvitem" id="ygtv30"><table id="ygtvtableel30" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel30" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20172685_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20172685_M1_2020-2021.html" title="20172685_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20172685_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc30" style="display:none;"></div></div><div class="ygtvitem" id="ygtv31"><table id="ygtvtableel31" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel31" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20172692_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20172692_M1_2020-2021.html" title="20172692_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20172692_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc31" style="display:none;"></div></div><div class="ygtvitem" id="ygtv32"><table id="ygtvtableel32" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel32" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20172764_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20172764_M1_2020-2021.html" title="20172764_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20172764_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc32" style="display:none;"></div></div><div class="ygtvitem" id="ygtv33"><table id="ygtvtableel33" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel33" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20172805_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20172805_M1_2020-2021.html" title="20172805_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20172805_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc33" style="display:none;"></div></div><div class="ygtvitem" id="ygtv34"><table id="ygtvtableel34" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel34" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20172856_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20172856_M1_2020-2021.html" title="20172856_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20172856_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc34" style="display:none;"></div></div><div class="ygtvitem" id="ygtv35"><table id="ygtvtableel35" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel35" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20173017_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20173017_M1_2020-2021.html" title="20173017_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20173017_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc35" style="display:none;"></div></div><div class="ygtvitem" id="ygtv36"><table id="ygtvtableel36" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel36" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20174424_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20174424_M1_2020-2021.html" title="20174424_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20174424_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc36" style="display:none;"></div></div><div class="ygtvitem" id="ygtv37"><table id="ygtvtableel37" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel37" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20174899_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20174899_M1_2020-2021.html" title="20174899_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20174899_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc37" style="display:none;"></div></div><div class="ygtvitem" id="ygtv38"><table id="ygtvtableel38" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel38" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20175117_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20175117_M1_2020-2021.html" title="20175117_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20175117_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc38" style="display:none;"></div></div><div class="ygtvitem" id="ygtv39"><table id="ygtvtableel39" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel39" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20175318_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20175318_M1_2020-2021.html" title="20175318_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20175318_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc39" style="display:none;"></div></div><div class="ygtvitem" id="ygtv40"><table id="ygtvtableel40" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel40" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20176650_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20176650_M1_2020-2021.html" title="20176650_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20176650_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc40" style="display:none;"></div></div><div class="ygtvitem" id="ygtv41"><table id="ygtvtableel41" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel41" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20177375_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20177375_M1_2020-2021.html" title="20177375_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20177375_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc41" style="display:none;"></div></div><div class="ygtvitem" id="ygtv42"><table id="ygtvtableel42" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel42" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20183459_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20183459_M1_2020-2021.html" title="20183459_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20183459_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc42" style="display:none;"></div></div><div class="ygtvitem" id="ygtv43"><table id="ygtvtableel43" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel43" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20183707_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20183707_M1_2020-2021.html" title="20183707_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20183707_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc43" style="display:none;"></div></div><div class="ygtvitem" id="ygtv44"><table id="ygtvtableel44" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel44" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20183948_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20183948_M1_2020-2021.html" title="20183948_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20183948_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc44" style="display:none;"></div></div><div class="ygtvitem" id="ygtv45"><table id="ygtvtableel45" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel45" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20193914_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20193914_M1_2020-2021.html" title="20193914_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20193914_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc45" style="display:none;"></div></div><div class="ygtvitem" id="ygtv46"><table id="ygtvtableel46" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel46" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20194320_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20194320_M1_2020-2021.html" title="20194320_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20194320_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc46" style="display:none;"></div></div><div class="ygtvitem" id="ygtv47"><table id="ygtvtableel47" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel47" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20194665_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20194665_M1_2020-2021.html" title="20194665_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20194665_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc47" style="display:none;"></div></div><div class="ygtvitem" id="ygtv48"><table id="ygtvtableel48" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel48" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20194817_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20194817_M1_2020-2021.html" title="20194817_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20194817_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc48" style="display:none;"></div></div><div class="ygtvitem" id="ygtv49"><table id="ygtvtableel49" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel49" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20195599_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20195599_M1_2020-2021.html" title="20195599_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20195599_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc49" style="display:none;"></div></div><div class="ygtvitem" id="ygtv50"><table id="ygtvtableel50" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvtn"><div class="ygtvspacer"></div></td><td id="ygtvcontentel50" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/20196097_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="20196097_M1_2020-2021.html" title="20196097_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">20196097_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc50" style="display:none;"></div></div><div class="ygtvitem" id="ygtv51"><table id="ygtvtableel51" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth1 ygtv-expanded ygtv-highlight0"><tbody><tr class="ygtvrow"><td class="ygtvcell ygtvblankdepthcell"><div class="ygtvspacer"></div></td><td class="ygtvcell ygtvln"><div class="ygtvspacer"></div></td><td id="ygtvcontentel51" class="ygtvcell ygtvhtml ygtvcontent"><span class="fp-filename-icon"><a href="https://eureka.univ-lehavre.fr/pluginfile.php/703706/mod_folder/content/0/30000000_M1_2020-2021.html"><span class="fp-icon"><img class="icon " alt="30000000_M1_2020-2021.html" title="30000000_M1_2020-2021.html" src="https://eureka.univ-lehavre.fr/theme/image.php/adaptable/core/1618475220/f/html-24"></span><span class="fp-filename">30000000_M1_2020-2021.html</span></a></span></td></tr></tbody></table><div class="ygtvchildren" id="ygtvc51" style="display:none;"></div></div></div>
        HTML;

        $crawler = new Crawler($html);
        $crawler->filter('a')->each(function (Crawler $node, $i) use($client,$jar,$io) {
            if($node->attr('href') == '#') return;
            $e = new Student();
            $e->setFileName($node->attr('href'));
            $resp = $client->request('GET', $node->attr('href'), [
                'cookies' => $jar,
                'allow_redirects' => [
                    'max' => 10
                ]
            ]);
            $crawler = new Crawler($resp->getBody()->getContents());
            $GLOBALS['notes'] = [];
            $GLOBALS['curDomain'] = null;
            $e->setFullName($crawler->filter('h1:first-child')->text());
            $e->setNumber(trim(explode(':',$crawler->filter('ul li:last-child')->text())[1]));
            //if($student = $this->em->getRepository(Student::class)->findOneBy(['number'=>$e->getNumber()])) $e = $student;
            $status = $crawler->filter('ul li:nth-child(3)')->text();
            if(trim($status) == 'Syllabus Alt') $e->setIsAlternant(true);
            $selector = $e->getIsAlternant() ? 'th.level0, td.col13' : 'th.level0, td.col15';
            $crawler->filter($selector)->each(function (Crawler $node, $i) {
                if(preg_match('/^D[0-9]$/', $node->text()) == 1) {
                    if(!isset($GLOBALS['notes'][$node->text()])) {
                        $GLOBALS['notes'][$node->text()] = [
                            'count' => 0,
                            'sum' => 0
                        ];
                    }
                    $GLOBALS['curDomain'] = $node->text();
                }
                elseif($GLOBALS['curDomain'] != null) {
                    $GLOBALS['notes'][$GLOBALS['curDomain']]['count']++;
                    $GLOBALS['notes'][$GLOBALS['curDomain']]['sum'] += intval(substr($node->text(),0,-1));
                }
            });
            ksort($GLOBALS['notes']);
            $e->setAcquieredDomains(0);
            $e->setD1($GLOBALS['notes']['D1']['sum'] / $GLOBALS['notes']['D1']['count']);
            $e->setD2($GLOBALS['notes']['D2']['sum'] / $GLOBALS['notes']['D2']['count']);
            $e->setD3($GLOBALS['notes']['D3']['sum'] / $GLOBALS['notes']['D3']['count']);
            $e->setD4($GLOBALS['notes']['D4']['sum'] / $GLOBALS['notes']['D4']['count']);
            $e->setD5($GLOBALS['notes']['D5']['sum'] / $GLOBALS['notes']['D5']['count']);
            $e->setD6($GLOBALS['notes']['D6']['sum'] / $GLOBALS['notes']['D6']['count']);
            $e->setTotal(($e->getD1()+$e->getD2()+$e->getD3()+$e->getD4()+$e->getD5()+$e->getD6())/6);

            $io->success('Persisted ' . $e->getFullName());
        });


        $io->success('Done !');

        return Command::SUCCESS;
    }
}
